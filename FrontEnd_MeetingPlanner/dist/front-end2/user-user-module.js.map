{"version":3,"sources":["webpack:///./src/app/user/user-dashboard.component.html","webpack:///./src/app/user/user-dashboard.component.scss","webpack:///./src/app/user/user-dashboard.component.ts","webpack:///./src/app/user/user.module.ts"],"names":[],"mappings":"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","file":"user-user-module.js","sourcesContent":["module.exports = \"<app-loader *ngIf=\\\"isLoading\\\"></app-loader>\\n<app-header></app-header>\\n<div class=\\\"container\\\">\\n  <div class=\\\"row user-dashboard\\\">\\n    <div class=\\\"col-12\\\">\\n      <app-calendar [modalData]=\\\"modalData\\\" [meetings]=\\\"meetings\\\" (calendarEventEmitter)=\\\"onCalendarEvent($event)\\\">\\n      </app-calendar>\\n    </div>\\n  </div>\\n</div>\\n\\n<!-- template for meeting modal -->\\n<ng-template #meetingTemplate>\\n  <div class=\\\"modal-header\\\">\\n    <h4 class=\\\"modal-title pull-left\\\"> Your meeting </h4>\\n    <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"meetingModalRef.hide()\\\">\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\n    </button>\\n  </div>\\n  <div class=\\\"modal-body\\\">\\n    <app-meeting [isEditMeeting]=\\\"false\\\" [isViewOnlyMeeting]=\\\"true\\\" [selectedMeeting]=\\\"selectedMeetingForView\\\"\\n      (onFormClose)=\\\"closeModal()\\\">\\n    </app-meeting>\\n  </div>\\n</ng-template>\\n\\n<!-- template for reminder modal -->\\n<ng-template #reminderTemplate let-close=\\\"close\\\">\\n    <div class=\\\"modal-header\\\">\\n      <h5 class=\\\"modal-title\\\">Meeting Reminder</h5>\\n      <button type=\\\"button\\\" class=\\\"close\\\" (click)=\\\"snoozeRemiderModal()\\\">\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\n      </button>\\n    </div>\\n    <div class=\\\"modal-body\\\">\\n      <h6 class=\\\"card-title\\\">Your meeting <span><b>\\\"{{meetingEvent.title}}\\\"</b></span> will start soon.</h6>\\n    </div>\\n    <div class=\\\"modal-footer\\\">\\n      <button type=\\\"button\\\" class=\\\"btn btn-outline-success\\\"\\n        (click)=\\\"snoozeRemiderModal()\\\">Snooze</button>\\n      <button type=\\\"button\\\" class=\\\"btn btn-outline-secondary\\\"\\n        (click)=\\\"dismissRemiderModal()\\\">Dismiss</button>\\n    </div>\\n  </ng-template>\"","module.exports = \".user-dashboard {\\n  margin-top: 30px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdXNlci9DOlxcVXNlcnNcXERFTExcXG5ld1xcTWVhbi1zdGFjay1hcHAxLW1lZXRpbmctcGxhbm5lci1tYXN0ZXJcXEZyb250RW5kX01lZXRpbmdQbGFubmVyL3NyY1xcYXBwXFx1c2VyXFx1c2VyLWRhc2hib2FyZC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFnQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvdXNlci91c2VyLWRhc2hib2FyZC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi51c2VyLWRhc2hib2FyZHtcbiAgICBtYXJnaW4tdG9wOiAzMHB4O1xufSJdfQ== */\"","import { Component, OnInit, ViewChild, TemplateRef } from '@angular/core';\nimport { Cookie } from 'ng2-cookies';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Router } from '@angular/router';\nimport { AppService } from '../services/app.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { SocketService } from '../services/socket.service';\nimport { CalendarEvent } from 'angular-calendar';\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\n\n@Component({\n  selector: 'app-user-dashboard',\n  templateUrl: './user-dashboard.component.html',\n  styleUrls: ['./user-dashboard.component.scss']\n})\nexport class UserDashboardComponent implements OnInit {\n\n  public title: string;\n  public inviter: any;\n  public invitee: any;\n  public start: any;\n  public end: any;\n  public authToken: any\n  public allUsers: any[];\n  public meetings: any = []\n  public allUsersData: any[]\n  public isAdmin: any\n  public userSortedList: any;\n  public events: CalendarEvent[] = [];\n  public selectedMeetingForView: any;\n  public isLoading: boolean = true;\n  public showMeetingDetails: boolean = false;\n  public meetingModalRef: BsModalRef;\n  public remiderModalRef: BsModalRef;\n\n  @ViewChild('meetingTemplate') meetingTemplate: TemplateRef<any>;\n  @ViewChild('reminderTemplate') reminderTemplate: TemplateRef<any>;\n  public isReminderSnooze: boolean = true;\n  meetingEvent: any;\n\n  ngOnInit() {\n    this.authToken = Cookie.get('authToken');\n    this.isAdmin = Cookie.get('activeUserType') === 'admin';\n\n    if (Cookie.get('authToken') == null || Cookie.get('authToken') == '' || Cookie.get('authToken') == undefined) {\n      if (this.meetingModalRef) {\n        this.meetingModalRef.hide();\n      }\n      if (this.remiderModalRef) {\n        this.remiderModalRef.hide();\n      }\n      this.router.navigate(['']);\n    }\n    if (this.isAdmin === false) {\n      this.getMeetings();\n    } else {\n      this.router.navigate(['']);\n    }\n\n    // remider every 5 second\n    setInterval(() => {\n       this.meetingReminder()\n    }, 5000)\n  }\n\n  modalData: {\n    action: string;\n    event: CalendarEvent;\n  };\n\n  constructor(\n    private router: Router,\n    public appService: AppService,\n    public toastr: ToastrService,\n    public socketService: SocketService,\n    private modalService: BsModalService) {\n  }\n\n  public getMeetings(): void {\n    // function call on page-load to get meetings to display in calender view.\n    this.appService.getMeetingsByInvitee()\n      .subscribe((response) => {\n        this.isLoading = false;\n        if (response.status == 200) {\n          this.meetings = response.data;\n          for (let event of this.meetings) {\n            event.title = event.title;\n            event.start = this.getDateObject(event.start);\n            event.end = this.getDateObject(event.end);\n            event.color = event.color;\n            event.actions = null;\n            event.remindMe = true;\n          }\n          this.events = this.meetings\n          this.toastr.success('meetings found for you');\n        } else {\n          this.toastr.error(response.message);\n          this.meetings = [];\n        }\n      }, (error) => {\n        this.isLoading = false;\n        this.toastr.error('something went wrong' + error);\n        this.meetings = [];\n      })\n  }\n\n  public onCalendarEvent(calendarEvent): void {\n    // function called when user click to view meeting details\n    if (calendarEvent.action == 'view') {\n      this.isLoading = true;\n      this.showMeetingDetails = true;\n      this.selectedMeetingForView = calendarEvent.event;\n      this.appService.getUserById(calendarEvent.event.inviter)\n        .subscribe((response) => {\n          this.isLoading = false;\n          if (response.status == 200) {\n            this.selectedMeetingForView['inviterFullName'] = `${response.data.firstName} ${response.data.lastName} (${response.data.userName})`\n            this.meetingModalRef = this.modalService.show(this.meetingTemplate);\n          } else {\n            this.toastr.error(response.message);\n          }\n        }, (error) => {\n          this.isLoading = false;\n          this.toastr.error('something went wrong' + error);\n        })\n    }\n  }\n\n  public closeModal(): void {\n    // function to close the meeting modal\n    this.getMeetings();\n    this.meetingModalRef.hide();\n  }\n\n  public meetingReminder(): void {\n    // function called for meeting reminder\n    let currentTime = new Date().getTime();\n    for (let meeting of this.meetings) {\n      let timeDifference = (meeting.start).getTime() - currentTime;\n      if (timeDifference <= 60000 && timeDifference > 0) {\n        if ((this.isReminderSnooze || this.meetingEvent != meeting) && Cookie.get('authToken') != null) {\n          this.isReminderSnooze = false;\n          this.meetingEvent = meeting;\n          this.remiderModalRef = this.modalService.show(this.reminderTemplate);\n          break;\n        }\n      } else if ((meeting.start).getTime() == currentTime && Cookie.get('authToken') != null) {\n        this.toastr.info('Meeting started');\n      }\n    }\n  }\n  public snoozeRemiderModal(): void {\n    // funtion called when meeting reminder snoozed\n    this.isReminderSnooze = true;\n    this.remiderModalRef.hide();\n  }\n  public dismissRemiderModal(): void {\n     // funtion called when meeting reminder dismissed\n    this.remiderModalRef.hide();\n  }\n\n  private getDateObject(date): Date {\n    return new Date(\n      new Date(date).getUTCFullYear(),\n      new Date(date).getUTCMonth(),\n      new Date(date).getUTCDate(),\n      new Date(date).getUTCHours(),\n      new Date(date).getUTCMinutes());\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { UserDashboardComponent } from './user-dashboard.component';\nimport { RouterModule } from '@angular/router';\nimport { SharedModule } from '../shared/shared.module';\n\n@NgModule({\n  declarations: [UserDashboardComponent],\n  imports: [\n    CommonModule,\n    SharedModule,\n    RouterModule.forChild([{ path: '', component: UserDashboardComponent }])\n  ]\n})\nexport class UserModule { }\n"],"sourceRoot":""}